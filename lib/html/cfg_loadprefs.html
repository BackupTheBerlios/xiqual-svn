<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML>
<HEAD>
   <TITLE>extern List* cfg_loadprefs</TITLE>
   <META NAME="GENERATOR" CONTENT="DOC++ 3.4.10">
</HEAD>
 <style type="text/css">
<!-- @import url(xiqual.css); //-->
</style>
</head>
<body>
<h1>Xiqual 0.9.1</h1>

In file xitools/cfg_loadprefs.c:<H2>extern <!1><A HREF="List.html">List</A>* <A HREF="#DOC.DOCU">cfg_loadprefs</A></H2><H2>(ulong tag1,<BR>&nbsp; ... )</H2><BLOCKQUOTE> Load preferences from an INI-style file.</BLOCKQUOTE>

<A NAME="DOC.DOCU"></A>
<HR>
<H2>Documentation</H2>
<BLOCKQUOTE>
Load preferences from an INI-style file.
The minimum configuration file accepted has one line with a variable name
on it:

<P>mybool

<P>A standalone variable like this would be considered a boolean variable.
When loaded into memory, you would be returned a List containing only
one preferences section, with no name.

<P>A larger file should be divided into sections, like this:

<P>[main]<BR>mybool<BR>something = something else

<P>The List returned from cfg_loadprefs() would now contain one preferences
section named "main", with two variable - mybool is a boolean (set to TRUE),
and the second variable would be named "something", a string variable set
to "something else".

<P>Whenever a new set of square brackets are encountered, the name between
them is used in a new preferences section. All the following variables
will be added to that until yet another section name is found.

<P>Legal variable names are anything not containing whatever your system
considers whitespace.

<P>Accepted tags:

<P><B>PREFS_FILENAME</B>: Name of file to load. Required.

<P><B>PREFS_STRINGS</B>: Load all data as string variables.

<P><B>PREFS_STRING_HOOK</B>, <B>PREFS_VALUE_HOOK</B>:
Normally, variables are tokenised to include the whole string (for string
variables) or get numbers until atoi() returns (integers). Use these tags
to specify an alternate function to handle the processing of the value.
Useful if a string contains multiple filenames, or several numbers to process.

<P>A variable structure will not be created, but the hook gets the name
of the variable that otherwise would be created, along with the
preferences section pointer and a string containing the rest of the
line. You will then need to duplicate any strings passed with strdup().

<P>The hook functions are declared as such in the sourcecode:

<P>void	(*strhook)(struct preferences *section, char *varname, char *values);

<P>void	(*valhook)(struct preferences *section, char *varname, char *values);

<P></BLOCKQUOTE>
<DL><DT><DT><B>Author:</B><DD>Ronny Bangsund

<DT><B>See Also:</B><DD><!1><A HREF="preferences.html">preferences</A>, <!1><A HREF="variable.html">variable</A>, <!1><A HREF="cfg_findsection.html">cfg_findsection</A>(), <!1><A HREF="cfg_findvar.html">cfg_findvar</A>(), <!1><A HREF="list_free.html">list_free</A>()
strtok(), atoi(), strdup()<BR><DD></DL><P><P><I><A HREF="index.html">Alphabetic index</A></I></P><HR>
<BR>
This page was generated with the help of <A HREF="http://docpp.sourceforge.net">DOC++</A>.
</BODY>
</HTML>
